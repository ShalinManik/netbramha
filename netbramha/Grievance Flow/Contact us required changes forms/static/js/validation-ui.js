(function(a){a.extend(a.fn,{displayMessages:function(c,d){var b=jQuery.parseJSON(c);$formater=this.prototype;$formater.init();var e=b.data;$formater.showMessages(e,d)},prototype:{defaults:{container:"container",messageElement:"label",helpMessageAttribute:"helpmessage",errorLabelContainer:a([])},init:function(){this.labelContainer=a(this.defaults.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer;this.toShow=a([])},showMessages:function(f,d){this.hideMessage(d);this.removeDefaultMessage(d);var c=this;var b,e;b=d+this.defaults.container;a.each(f,function(h,i){e=i.messageType[d];var g=a("*[messagefor='"+i.field+"']["+b+"='true']");if(e!="undefined"){if(g[0]){g.html(e);g.show()}else{c.defaultShowMessage(i.field,e,d)}}})},defaultShowMessage:function(b,d,c){label=a("<"+this.defaults.messageElement+">").attr("messagefor",b).html(d||"");label.attr("inline"+c,"true").addClass(this.defaults["'"+c+"Class'"]);if(this.defaults.wrapper){label=label.hide().show().wrap("<"+this.defaults.wrapper+"/>").parent()}if(!this.labelContainer.append(label).length){label.insertAfter("#"+b)}this.toShow=this.toShow.add(label)},removeDefaultMessage:function(b){a("*[messagefor][inline"+b+"='true']").remove()},hideMessage:function(b){a("*["+b+this.defaults.container+"]").hide()}}})}(jQuery));var MessageType=new function(){this.HELP="help",this.ERROR="error"};